(this["webpackJsonpFrontend-Online-Store-React"]=this["webpackJsonpFrontend-Online-Store-React"]||[]).push([[0],{23:function(t,e,a){t.exports=a(42)},28:function(t,e,a){},30:function(t,e,a){},39:function(t,e,a){},40:function(t,e,a){},41:function(t,e,a){},42:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),c=a(21),i=a.n(c),o=(a(28),a(5)),l=a(6),s=a(8),u=a(7),d=a(11),p=a(1),m=a(9),h=a(12),f=a.n(h),b=a(15),v=a(14),g=(a(30),function(t){Object(s.a)(a,t);var e=Object(u.a)(a);function a(){return Object(o.a)(this,a),e.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var t=this.props,e=t.product,a=t.addToCart,n=e.thumbnail,c=e.title,i=e.price,o=e.id,l=e.shipping.free_shipping;return r.a.createElement("div",{"data-testid":"product",className:"product-container"},r.a.createElement("h4",null,c),r.a.createElement("img",{src:n,alt:c,className:"img-card"}),r.a.createElement("p",null,"Pre\xe7o: R$".concat(i)),r.a.createElement("p",{"data-testid":l&&"free-shipping"},l&&"free-shipping"),r.a.createElement("button",{type:"button","data-testid":"product-add-to-cart",id:o,onClick:a},"Adicionar ao Carrinho"),r.a.createElement(d.b,{"data-testid":"product-detail-link",to:{pathname:"/ProductDetails/".concat(o),state:{product:e}}},"Especifica\xe7\xf5es Tecnicas"))}}]),a}(n.Component));function E(){return y.apply(this,arguments)}function y(){return(y=Object(b.a)(f.a.mark((function t(){var e,a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://api.mercadolibre.com/sites/MLB/categories");case 2:return e=t.sent,a=e.json(),t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function O(t,e){return j.apply(this,arguments)}function j(){return(j=Object(b.a)(f.a.mark((function t(e,a){var n,r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://api.mercadolibre.com/sites/MLB/search?category=".concat(e,"&q=").concat(a));case 2:return n=t.sent,r=n.json(),t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function C(){return JSON.parse(localStorage.getItem("shoppingCart"))||[]}function k(t){localStorage.setItem("shoppingCart",JSON.stringify(t))}a(39);var S=function(t){Object(s.a)(a,t);var e=Object(u.a)(a);function a(t){var n;Object(o.a)(this,a),(n=e.call(this,t)).inputText=function(t){var e=t.target,a=e.name,r=e.value,c=e.type;n.setState(Object(v.a)({},a,r),(function(){"radio"===c&&n.buttonClick()}))},n.buttonClick=Object(b.a)(f.a.mark((function t(){var e,a,r,c,i;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=n.state,a=e.searchBar,r=e.category,n.setState({loading:!0}),t.next=4,O(r,a);case 4:c=t.sent,i=c.results,n.setState({actualProduct:i,loading:!1,hasSearched:!0});case 7:case"end":return t.stop()}}),t)}))),n.fetchCategories=Object(b.a)(f.a.mark((function t(){var e;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E();case 2:e=t.sent,n.setState({categoriesList:e});case 4:case"end":return t.stop()}}),t)}))),n.addToCart=function(t){var e=t.target.id,a=n.state,r=a.cartList,c=a.actualProduct.find((function(t){return t.id===e}));k([].concat(Object(m.a)(r),[c])),n.setState({cartList:[].concat(Object(m.a)(r),[c])})},n.renderCategories=function(){return n.state.categoriesList.map((function(t){var e=t.id,a=t.name;return r.a.createElement("label",{htmlFor:e,key:e},r.a.createElement("input",{type:"radio","data-testid":"category",name:"category",id:e,value:e,onChange:n.inputText}),a)}))},n.renderResults=function(){var t=n.state,e=t.actualProduct,a=t.hasSearched,c=t.cartList;return 0===e.length?a&&r.a.createElement("h1",null,"Nenhum produto foi encontrado"):e.map((function(t){return r.a.createElement(g,{product:t,id:t.id,"data-testid":c.includes(t.id)?"shopping-cart-product-name":"",key:t.id,addToCart:n.addToCart})}))};var c=C();return n.state={categoriesList:[],searchBar:"",actualProduct:[],category:"",cartList:c,loading:!1,hasSearched:!1},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.fetchCategories()}},{key:"render",value:function(){var t=this.state,e=t.searchBar,a=t.cartList,n=t.loading;return r.a.createElement("main",null,r.a.createElement("label",{htmlFor:"search"},r.a.createElement("input",{type:"text",id:"search",placeholder:"Busca...","data-testid":"query-input",name:"searchBar",value:e,onChange:this.inputText}),r.a.createElement("button",{type:"button","data-testid":"query-button",onClick:this.buttonClick},"Pesquisar"),r.a.createElement("p",{"data-testid":"home-initial-message"},"Digite algum termo de pesquisa ou escolha uma categoria.")),r.a.createElement(d.b,{"data-testid":"shopping-cart-button",to:"/cart"},"Carrinho"),r.a.createElement("span",{"data-testid":"shopping-cart-size"},a.length),r.a.createElement("div",{className:"categories-products-div"},r.a.createElement("div",{className:"categories"},this.renderCategories()),r.a.createElement("div",{className:"list-container"},n?r.a.createElement("span",null,"Carregando..."):this.renderResults())))}}]),a}(n.Component),P=(a(40),a(41),function(t){Object(s.a)(a,t);var e=Object(u.a)(a);function a(t){var n;Object(o.a)(this,a),(n=e.call(this,t)).initialTotalPrice=function(){var t=n.state.totalPrice;n.state.cartList.forEach((function(e){n.setState({totalPrice:t+=e.price})}))},n.hasAvailable=function(t,e){return e.filter((function(e){return e.id===t.id})).length<t.available_quantity},n.incrementProduct=function(t){var e=t.target.id,a=n.state,r=a.cartList,c=a.totalPrice,i=r.find((function(t){return t.id===e}));n.hasAvailable(i,r)&&(k([].concat(Object(m.a)(r),[i])),n.setState({cartList:[].concat(Object(m.a)(r),[i])}),n.setState({totalPrice:parseFloat((c+i.price).toFixed(2))}))},n.decrementProduct=function(t){var e=t.target.id,a=n.state,r=a.cartList,c=a.items,i=a.totalPrice,o=r.find((function(t){return t.id===e})),l=r.filter((function(t){return t.id===e}));r.splice(r.indexOf(o),1),l.length<2&&(c.splice(c.indexOf(o),1),n.setState({items:c})),k(Object(m.a)(r)),n.setState({cartList:Object(m.a)(r)}),n.setState({totalPrice:parseFloat((i-o.price).toFixed(2))})};var r=C(),c=Object(m.a)(new Map(r.map((function(t){return[t.id,t]}))).values());return n.state={cartList:r,items:c,totalPrice:0},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.initialTotalPrice()}},{key:"render",value:function(){var t=this,e=this.state,a=e.items,n=e.cartList,c=e.totalPrice;return r.a.createElement("div",{className:"body-cart-container"},r.a.createElement("header",null,r.a.createElement("h1",null,"Seu Carrinho")),r.a.createElement("div",{className:"cart-item-list"},0===n.length?r.a.createElement("p",{"data-testid":"shopping-cart-empty-message"},"Seu carrinho est\xe1 vazio"):a.map((function(e){return r.a.createElement("div",{key:e.id,"data-testid":"shopping-cart-product-name",className:"cart-item"},r.a.createElement("h4",null,e.title),r.a.createElement("img",{src:e.thumbnail,alt:e.title,className:"img-item-cart"}),r.a.createElement("p",null,"Pre\xe7o: R$".concat(e.price)),r.a.createElement("button",{type:"button","data-testid":"product-increase-quantity",onClick:t.incrementProduct,id:e.id},"+"),r.a.createElement("p",{"data-testid":"shopping-cart-product-quantity"},"Quantidade: ".concat(n.filter((function(t){return t.id===e.id})).length)),r.a.createElement("p",null,"Quantidade dispon\xedvel: ".concat(e.available_quantity)),r.a.createElement("div",null,r.a.createElement("button",{type:"button","data-testid":"product-decrease-quantity",onClick:t.decrementProduct,id:e.id},"-")))}))),r.a.createElement("p",null,"Total: R$",c),r.a.createElement("p",null,"Itens ".concat(n.length)),r.a.createElement(d.b,{to:"/checkout","data-testid":"checkout-products"},r.a.createElement("button",{type:"button"},"Finalizar compra")))}}]),a}(n.Component)),x=function(t){Object(s.a)(a,t);var e=Object(u.a)(a);function a(){var t;Object(o.a)(this,a),(t=e.call(this)).handleChange=function(e){var a=e.target,n=a.name,r=a.value;t.setState(Object(v.a)({},n,r))},t.renderInput=function(e,a,n){return r.a.createElement("label",{htmlFor:a},e,r.a.createElement("input",{type:"text","data-testid":"checkout-".concat(a),id:a,name:a,value:n,onChange:t.handleChange}))};var n=C();return t.state={cartItems:n,fullname:"",email:"",cpf:"",phone:"",cep:"",address:""},t}return Object(l.a)(a,[{key:"render",value:function(){var t=this.state,e=t.cartItems,a=t.fullname,n=t.email,c=t.cpf,i=t.phone,o=t.cep,l=t.address;return r.a.createElement("div",null,e.map((function(t){return r.a.createElement("p",{key:t.id},t.title)})),r.a.createElement("form",null,this.renderInput("Nome completo: ","fullname",a),r.a.createElement("br",null),this.renderInput("Email: ","email",n),r.a.createElement("br",null),this.renderInput("CPF: ","cpf",c),r.a.createElement("br",null),this.renderInput("Telefone: ","phone",i),r.a.createElement("br",null),this.renderInput("CEP: ","cep",o),r.a.createElement("br",null),this.renderInput("Endere\xe7o: ","address",l),r.a.createElement("br",null)))}}]),a}(n.Component),L=function(t){Object(s.a)(a,t);var e=Object(u.a)(a);function a(t){var n;Object(o.a)(this,a),(n=e.call(this,t)).inputText=function(t){var e=t.target,a=e.name,r=e.value;n.setState(Object(v.a)({},a,r))},n.saveToCart=function(){var t=n.state,e=t.cartList,a=t.product;k([].concat(Object(m.a)(e),[a])),n.setState({cartList:[].concat(Object(m.a)(e),[a])})};var r=n.props.location.state.product,c=C();return n.state={product:r,cartList:c,inputValue:""},n}return Object(l.a)(a,[{key:"render",value:function(){var t=this.state,e=t.product,a=t.cartList,n=t.inputValue,c=e.title,i=e.price,o=e.thumbnail,l=e.shipping.free_shipping;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",{"data-testid":"product-detail-name"},c),r.a.createElement("img",{src:o,alt:"foto ".concat(c)}),r.a.createElement("p",null,i),r.a.createElement("button",{type:"button","data-testid":"product-detail-add-to-cart",onClick:this.saveToCart},"Adicionar ao Carrinho"),r.a.createElement(d.b,{"data-testid":"shopping-cart-button",to:"/cart"},"Carrinho"),r.a.createElement("span",{"data-testid":"shopping-cart-size"},a.length),r.a.createElement("p",{"data-testid":l&&"free-shipping"},l&&"free-shipping"),r.a.createElement("form",null,r.a.createElement("textarea",{"data-testid":"product-detail-evaluation",value:n,name:"inputValue",onChange:this.inputText}),r.a.createElement("button",{type:"button"},"Enviar")))}}]),a}(r.a.Component),w=function(t){Object(s.a)(a,t);var e=Object(u.a)(a);function a(){return Object(o.a)(this,a),e.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(d.a,null,r.a.createElement(p.c,null,r.a.createElement(p.a,{exact:!0,path:"/",component:S}),r.a.createElement(p.a,{path:"/cart",component:P}),r.a.createElement(p.a,{path:"/checkout",component:x}),r.a.createElement(p.a,{exact:!0,path:"/ProductDetails/:id",component:L})))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[23,1,2]]]);
//# sourceMappingURL=main.aa5931be.chunk.js.map